.layout-root {
  display: grid;
  /* constrain the two content columns but keep container full-bleed */
  grid-template-columns: minmax(0, var(--layout-left-max, 600px)) minmax(0, var(--layout-right-max, 700px));
  justify-content: center; /* center the two tracks within full-width container */
  /* Make the middle content stretch and keep the footer at the bottom */
  grid-template-rows: auto 1fr auto auto;
  gap: 0;
  margin: 0;
  padding: 0;
  min-height: 100dvh;
  grid-template-areas:
    "one   two"
    "three two"
    "four  two"
    "five  five";
}

/* Extend the right column's background to the viewport edge when centered */
.layout-column-right {
  position: relative;
  overflow: visible;
  min-width: 0;
  position: relative;
  overflow: visible;
  /* box-shadow: 0px 0px 8px -2px rgba(15, 15, 15, 0.3) inset; */
  margin-top: calc(-64px);
  padding-top: calc(64px);
  height: calc(100% + 64px);
  border-radius: 12rem 0 0 24rem;
}
.layout-column-right::before {
  content: "";
  position: absolute;
  top: 0;
  bottom: 0;
  left: 100%;
  /* extend background one viewport width to the right */
  width: 100vw;
  pointer-events: none;
  z-index: -1;
}

[data-w3a-theme="light"] .layout-column-right {
  /* background: var(--w3a-colors-surface); */
  background-image: radial-gradient(var(--w3a-colors-borderPrimary) 1px, transparent 1px);
  background-size: 32px 32px;
  background-position: 15px 15px;
  /* border: 1px solid var(--w3a-colors-surface3); */
  border-right: none;
}
[data-w3a-theme="light"] .layout-column-right::before {
  /* background: var(--w3a-colors-surface); */
  background-image: radial-gradient(var(--w3a-colors-borderPrimary) 1px, transparent 1px);
  background-size: 32px 32px;
  background-position: -15px 15px;
  /* border: 1px solid var(--w3a-colors-surface3); */
  border-left: none;
}

[data-w3a-theme="dark"] .layout-column-right {
  /* background: var(--w3a-colors-slate825); */
  background-image: radial-gradient(var(--w3a-colors-borderPrimary) 1px, transparent 1px);
  background-size: 32px 32px;
  background-position: 15px 15px;
  /* border: 1px solid var(--w3a-colors-surface); */
  border-right: none;
}
[data-w3a-theme="dark"] .layout-column-right::before {
  /* background: var(--w3a-colors-surface4); */
  background-image: radial-gradient(var(--w3a-colors-borderPrimary) 1px, transparent 1px);
  background-size: 32px 32px;
  background-position: -15px 15px;
  /* border: 1px solid var(--w3a-colors-surface); */
  border-left: none;
}

@media (max-width: 1024px) {
  /* Disable full-bleed extension on stacked layout */
  .layout-column-right::before { display: none; }
}

/* Mobile/tablet breakpoint: stack areas and normalize right column visuals */
@media (max-width: 1024px) {
  .layout-root {
    grid-template-columns: 1fr;
    /* Allow main content to fill space and footer to sit flush */
    grid-template-rows: auto 1fr auto auto auto;
    grid-template-areas:
      "one"
      "two"
      "three"
      "four"
      "five";
  }
  .one {
    margin-bottom: 1rem;
  }
  .layout-column-right {
    margin-top: 0;
    padding-top: 0;
    position: static;
    top: auto;
    height: auto;
    overflow: visible;
    min-height: auto;
    border: none;
    border-radius: 0rem;
  }
  .layout-column-right > .constrained-column {
    position: static;
    top: auto;
    height: auto;
    overflow: visible;
  }
}

.constrained-column {
  max-width: 600px;
  padding: 0rem;
  /* Allow content to shrink and avoid track stretching */
  width: 100%;
  min-width: 0;
  box-sizing: border-box;
}

.layout-column-left {
  display: grid;
  /* Allow the content column to grow/shrink naturally and stay centered */
  justify-content: center;
  min-width: 0;
  padding-left: 1rem;
  padding-right: 1rem;
}
/* Stack content vertically and push footer to the bottom of the left column */
.layout-column-left > .constrained-column {
  display: flex;
  flex-direction: column;
}

/* Cards */
.card {
  min-width: 0;
  max-width: 100%;
  box-sizing: border-box;
  display: grid;
}
.card > .constrained-column {
  justify-self: center;
  width: 100%;
  padding-left: 1rem;
  padding-right: 1rem;
}
.two {
  justify-self: stretch;
}
.two .constrained-column {
  max-width: none;
}
.one   { grid-area: one; }
.two   { grid-area: two; }
.three { grid-area: three; }
.four  { grid-area: four; }
.five  { grid-area: five; }

/* Fullâ€‘bleed utility: let content span entire viewport width inside centered grid */
.full-bleed {
  width: 100vw;
  margin-left: calc(50% - 50vw);
  margin-right: calc(50% - 50vw);
  box-sizing: border-box;
}

.site-footer {
  margin-top: 2rem;
  display: flex;
  gap: 10px;
  align-items: center;
  padding: 0.75rem 0 0.25rem 0;
  flex-direction: column; /* stack icons then badge */
}
.site-footer-icons {
  display: inline-flex;
  gap: 12px;
  align-items: center;
  justify-content: center;
}
.site-footer-link {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 34px;
  height: 34px;
  border-radius: 9999px;
  border: 1px solid var(--fe-border);
  color: var(--fe-text);
  text-decoration: none;
  background: var(--w3a-colors-surface2);
  transition: background var(--fe-fast) var(--fe-ease), box-shadow var(--fe-fast) var(--fe-ease);
}
.site-footer-link:hover {
  background: var(--w3a-colors-surface);
  box-shadow: 0 2px 8px var(--fe-shadow);
  color: var(--w3a-colors-secondaryHover);
}

@media (max-width: 768px) {
  /* Hide the static navbar on small screens */
  .navbar-static { display: none !important; }

  .layout-root > .hero,
  .layout-root > .hero-intro,
  .layout-root > .bento-grid,
  .layout-root > .site-footer,
  .layout-column-right > .constrained-column {
    padding-left: 0rem;
    padding-right: 0rem;
  }
  .layout-root > .hero {
    padding-top: 0.5rem;
  }
}

/* Hero section */
.hero {
  display: flex;
  flex-direction: column;
  gap: var(--fe-gap-4);
  padding: 1rem 0;
}

.hero-title {
  position: relative;
  margin: 0;
  margin-top: 2rem;
  font-size: 3rem;
  font-weight: 700;
  color: var(--fe-text-primary);
}

.hero-subtitle {
  font-size: 1.25rem;
  font-weight: 600;
  margin: 0.5rem 0 0.5rem 0;
  line-height: 1.25;
}

/* Tweak hero typography for smaller screens */
@media (max-width: 768px) {
  .hero-title { font-size: 2.6rem; }
  .hero-subtitle { font-size: 1.125rem; }
}

.hero-description {
  margin: 0;
  color: var(--w3a-colors-textSecondary);
}

.touch-icon-pattern-position {
  position: absolute;
  top: -2rem;
  left: clamp(64px, 66vw, 400px);
  transform: rotate(20deg);
  vertical-align: middle;
  z-index: -1;
}

.hero-tagline {
  margin: 0;
  color: var(--fe-text-dim);
  font-size: 1rem;
  line-height: 1.6;
}

.hero-ctas {
  display: flex;
  align-items: center;
  gap: 1rem;
  flex-wrap: wrap;
  margin-top: 0.5rem;
}

.hero-ctas a { text-decoration: none; }

.cta-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.6rem 1rem 0.6rem 0.9rem;
  border-radius: 2rem;
  color: var(--w3a-colors-textButton, #fff);
  min-width: 150px;
  box-shadow: 0 1px 2px var(--fe-shadow);
  transition: color 0.2s ease, background-color 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
}
.cta-primary {
  background-color: var(--w3a-colors-primary);
}
.cta-primary:hover {
  color: var(--w3a-colors-textButton, #fff);
  box-shadow: 0 4px 12px var(--fe-shadow-strong);
  background-color: var(--w3a-colors-primaryHover);
}

.cta-secondary {
  color: var(--w3a-colors-textButton, #fff);
  border: 1px solid transparent;
  background-color: var(--w3a-colors-secondary);
}

.cta-secondary:hover {
  color: var(--w3a-colors-textButton, #fff);
  background-color: var(--w3a-colors-secondaryHover);
  box-shadow: 0 3px 10px var(--fe-shadow);
  border-color: transparent;
}
.cta-primary:focus-visible, .cta-secondary:focus-visible {
  outline: none;
  box-shadow: 0 0 0 3px var(--w3a-shadows-sm);
}
.cta-icon { display: inline-block; }
.cta-chevron { font-size: 1.25rem; line-height: 1; }

/* Bento grid */
.bento-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  grid-auto-rows: 170px;
  gap: 0.5rem;
  place-content: center;
  margin-top: 1rem;
}

/* Denser rows on mobile to fit more content above the fold */
@media (max-width: 768px) {
  .bento-grid { grid-auto-rows: 120px; }
}

.bento-card {
  position: relative;
  border-radius: 1rem;
  box-shadow: 0 1px 3px var(--w3a-shadows-md);
}
[data-w3a-theme="light"] .bento-card {
  background: var(--w3a-colors-surface);
}
[data-w3a-theme="dark"] .bento-card {
  background: var(--w3a-colors-surface2);
}

.bento-card.tall { grid-row: span 2; }
.bento-card.wide { grid-column: span 2; }

.bento-card:hover {
  border-color: var(--fe-border-strong);
  box-shadow: 0 6px 18px var(--fe-shadow-strong);
}

.bento-content {
  display: grid;
  grid-template-columns: auto 1fr;
  grid-template-rows: auto auto;
  gap: 0.5rem;
  column-gap: 0.5rem;
  padding: 1.5rem;
  align-items: start;
}

.bento-icon {
  color: var(--accent, var(--fe-primary));
  width: 20px;
  height: 20px;
  grid-column: 1;
  grid-row: 1;
  align-self: center;
}

.bento-title {
  margin: 0;
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--fe-text);
  grid-column: 2;
  grid-row: 1;
}

.bento-desc {
  margin: 0;
  color: var(--fe-text-dim);
  line-height: 1.6;
  font-size: 0.95rem;
  grid-column: 1 / span 2;
  grid-row: 2;
}

/* Accent palettes for icons */
.accent-blue  { --accent: oklch(72.371% 0.14711 253.025); }
.accent-grey  { --accent: var(--w3a-colors-textPrimary)}

.bento-caption {
  position: absolute;
  left: 50%;
  bottom: 12px;
  transform: translateX(-50%);
  background: var(--fe-surface-solid);
  color: var(--fe-text);
  padding: 6px 10px;
  border-radius: 9999px;
  font-size: 0.9rem;
  box-shadow: 0 2px 6px var(--fe-shadow);
  text-align: center;
}

.passkey-demo {
  display: grid;
  place-items: center;
  padding-top: 2rem;
}

/* Install panel (hero code block) */
.install-panel {
  margin-top: 1rem;
  border: none;
  border-radius: 14px;
  background: color-mix(in srgb, var(--fe-bg) 80%, transparent);
  box-shadow: 0 2px 10px var(--fe-shadow);
  /* Avoid clipping internal scrollbars and allow responsive shrink */
  overflow: visible;
  min-width: 0;
  width: 100%;
  box-sizing: border-box;
}
.install-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.35rem 0.35rem 0.25rem 0.25rem;
  font-size: 0.875rem;
  font-weight: 500;
  background: var(--w3a-colors-surface2);
  border-bottom: 2px solid var(--w3a-colors-surface3);
  border-radius: 1rem 1rem 0 0;
}
.install-header-left { display: flex; align-items: center; gap: 12px; }
.install-term {
  margin-top: 2px;
  color: var(--fe-text-dim);
}
.install-tabs { display: flex; align-items: center; gap: 0.5rem; }
.install-tab {
  appearance: none;
  background: transparent;
  border: 1px solid transparent;
  border-radius: 1rem;
  color: var(--fe-text-dim);
  font: inherit;
  padding: 4px 1rem 4px 1rem;
  cursor: pointer;
  /* Hint to browser that this is a tap target (reduces tap delay) */
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
  /* Animate active pill changes */
  transition:
    background var(--fe-fast) var(--fe-ease),
    border-color var(--fe-fast) var(--fe-ease),
    color var(--fe-fast) var(--fe-ease),
    box-shadow var(--fe-fast) var(--fe-ease),
    transform var(--fe-fast) var(--fe-ease);
}
.install-tab.active {
  color: var(--fe-text);
  /* border-color: var(--fe-border); */
  border-color: transparent;
  background: var(--fe-surface);
  box-shadow: 0 2px 8px var(--fe-shadow);
}
/* Subtle press feedback */
.install-tab:active {
  transform: scale(0.98);
}
.install-copy {
  display: grid;
  place-content: center;
  background: transparent;
  border: none;
  color: var(--fe-text-dim);
  padding: 6px;
  cursor: pointer;
  /* Faster touch activation and cleaner highlight on mobile */
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
}
.install-copy { transition: color var(--fe-fast) var(--fe-ease); }
.install-copy:hover { color: color-mix(in srgb, var(--fe-text-dim) 70%, var(--fe-bg)); }
.install-copy.is-copied { color: var(--fe-text); }
/* Subtle press feedback */
.install-copy:active { transform: scale(0.98); }

/* Animated icon swap for CopyButton */
.install-copy-inner {
  position: relative;
  width: var(--install-copy-icon-size, 16px);
  height: var(--install-copy-icon-size, 16px);
  display: inline-block;
}
.install-copy-check,
.install-copy-copy-icon {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform 300ms ease-in-out, opacity 300ms ease-in-out, filter 300ms ease-in-out;
  will-change: transform, opacity, filter;
}
.install-copy-check {
  transform: scale(0.25);
  opacity: 0;
  filter: blur(2px);
}
.install-copy-copy-icon {
  transform: scale(1);
  opacity: 1;
  filter: blur(0);
}
.install-copy.is-copied .install-copy-check {
  transform: scale(1);
  opacity: 1;
  filter: blur(0);
}
.install-copy.is-copied .install-copy-copy-icon {
  transform: scale(0.25);
  opacity: 0;
  filter: blur(2px);
}
.install-body {
  padding: 0;
  background: color-mix(in srgb, var(--fe-bg) 60%, transparent);
  /* Ensure long code lines never force the grid track to grow */
  min-width: 0;
  width: 100%;
  box-sizing: border-box;
  overflow-x: auto;
}
.install-body .shiki {
  /* Ensure React/Core Shiki snippets have consistent height */
  min-height: 275px;
}
.install-body > div { min-width: 0; width: 100%; }
.install-code-line {
  font-family: var(--fe-font-mono);
  font-size: 0.95rem;
  color: var(--fe-text);
}

.code-block,
.shiki {
  /* Override Shiki inline style background to match site surface */
  background: var(--w3a-colors-surface2) !important;
  color: var(--fe-text) !important;
  margin: 0; /* remove margin on .shiki */
  padding: 1rem; /* unified padding */
  border-radius: 0 0 1rem 1rem;
  /* remove border per request */
  border: none;
  overflow-x: auto;
  overflow-y: hidden;
  max-width: 100%;
  width: 100%;
  box-sizing: border-box;
  contain: inline-size;
  /* enforce monospace regardless of global font stacks */
  font-family: var(--fe-font-mono, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas) !important;
  line-height: 1; /* compact code lines */
}
/* Make Shiki scrollbars as invisible as possible, but usable on hover */
.shiki {
  /* Firefox/Edge legacy */
  -ms-overflow-style: none; /* IE/Edge */
  scrollbar-width: none;    /* Firefox: hide by default */
}
.shiki:hover {
  scrollbar-width: thin;    /* Firefox: show a thin bar on hover */
}
/* WebKit-based browsers */
.shiki::-webkit-scrollbar {
  width: 0;
  height: 0; /* hide by default */
}
.shiki:hover::-webkit-scrollbar {
  width: 6px;
  height: 6px; /* show thin bar on hover */
}
.shiki::-webkit-scrollbar-track {
  background: transparent;
}
.shiki::-webkit-scrollbar-thumb {
  background-color: transparent; /* invisible until hover */
  border-radius: 8px;
}
.shiki:hover::-webkit-scrollbar-thumb {
  background-color: color-mix(in srgb, var(--fe-text-secondary) 35%, transparent);
}
.shiki:hover::-webkit-scrollbar-thumb:hover {
  background-color: color-mix(in srgb, var(--fe-text-secondary) 55%, transparent);
}
.code-block code,
.shiki code {
  font-family: inherit !important;
  font-size: 0.94rem;
  display: block;
}
.code-block .line,
.shiki .line {
  display: block;
}

/* Simple keyword tint for CLI managers */
.code-block .code-kw-pm,
.shiki .code-kw-pm {
  color: oklch(0.74 0.166 255);
}
.code-block .code-kw-pkg,
.shiki .code-kw-pkg {
  /* Package names inside strings should match string color */
  color: inherit;
}
/* Make the primary provider component stand out as orange */
.code-block .code-kw-tatchi-provider,
.shiki .code-kw-tatchi-provider {
  color: #953800; /* GitHub light-ish orange */
}
[data-w3a-theme="dark"] .code-block .code-kw-tatchi-provider,
[data-w3a-theme="dark"] .shiki .code-kw-tatchi-provider {
  color: #FFA657; /* GitHub dark orange */
}
/* Home hero install command: make package purple without affecting Shiki imports */
.install-body .code-block--dark .code-kw-pkg {
  color: #8250DF;
}
[data-w3a-theme="dark"] .install-body .code-block--dark .code-kw-pkg {
  color: #D2A8FF;
}
/* Explicit purple for install snippet package names */
.code-block .code-kw-pkg-install,
.shiki .code-kw-pkg-install {
  color: #8250DF; /* GitHub light purple */
}
[data-w3a-theme="dark"] .code-block .code-kw-pkg-install,
[data-w3a-theme="dark"] .shiki .code-kw-pkg-install {
  color: #D2A8FF; /* GitHub dark purple */
}

/* Light mode overrides (VitePress + SDK synced) */
[data-w3a-theme="light"] .code-block,
[data-w3a-theme="light"] .shiki {
  background: var(--w3a-colors-surface) !important;
}

[data-w3a-theme="light"] .install-header {
  background: var(--w3a-colors-surface);
  border-bottom: 2px solid var(--w3a-colors-colorBackground);
}
